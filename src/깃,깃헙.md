좋아, 길게 가는 프로젝트에서도 **세부 이력**을 깔끔하게 남기고, 언제든 쉽게 되돌릴 수 있게 VS Code 터미널 기준으로 정리해줄게.
아래는 “내가 언제 어떤 명령을 왜 쓰는지”까지 포함된 **현실적인 워크플로우 + 치트시트**야. 그대로 따라 하면 돼.

---

# 0) 한 번만 해두는 기본 설정

```bash
# 사용자 정보 (커밋에 찍힘)
git config --global user.name "Your Name"
git config --global user.email "you@example.com"

# 기본 브랜치 이름을 main으로
git config --global init.defaultBranch main

# pull 시 rebase로 정리된 이력 유지 (추천)
git config --global pull.rebase true

# 보기 편한 로그 포맷 alias
git config --global alias.lg "log --oneline --decorate --graph --all"
```

---

# 1) 하루 시작 루틴

```bash
# 원격에서 최신 코드 받아오기 (이력 깔끔)
git pull --rebase

# 현재 변경 사항 확인 (가장 많이 쓰는 명령)
git status
```

- **왜?** 충돌을 최소화하고 오늘 작업 시작 전에 베이스를 최신으로 맞춤.

---

# 2) 기능(또는 작업 단위)별 브랜치로 시작

```bash
# 새 브랜치 만들고 전환
git switch -c feature/matching-ui   # 또는 git checkout -b feature/matching-ui
```

- **왜?** main에서 직접 작업하지 말자. 기능별로 브랜치를 나눠야 **이유 있는 이력**이 남고, 나중에 부분 롤백/비교가 가능.

---

# 3) 작업 → 작은 단위로 커밋

```bash
git add -p                # 변경된 파일에서 추가할 덩어리만 선택 (추천)
git add path/to/file.tsx  # 또는 파일 단위로 추가
git commit -m "feat(match): 추천 저장 버튼 상단 고정 및 카운트 표시"
```

- **메시지 규칙(추천: Conventional Commits)**
  `feat`, `fix`, `refactor`, `docs`, `test`, `chore`, `perf`, `style`
  예) `fix(match): 중복 추천 방지 (Map으로 고유화)`

- **왜?** 작은 커밋은 추적/리뷰/되돌리기가 쉽다. “전체 교체”보다 훨씬 안전.

---

# 4) 작업 중 잠깐 다른 일 해야 할 때 (WIP 저장)

```bash
git stash push -m "WIP: 매물 카드 정렬 중"
# …다른 브랜치로 이동/작업…
git switch feature/matching-ui
git stash list           # 저장 목록 보기
git stash pop            # 가장 최근 Stash 적용 (적용 + 제거)
```

- **왜?** 아직 커밋하기 애매한 변경을 임시로 보관.

---

# 5) 원격으로 백업(push) & 동료와 공유

```bash
git push -u origin feature/matching-ui
```

- **왜?** 내 로컬이 날아가도 안전. PR 만들 준비.

---

# 6) 최신 main 반영(충돌 최소화)

```bash
git fetch origin
git rebase origin/main   # 내 브랜치 커밋들을 최신 main 위로 재배치
# 충돌나면 파일 고치고
git add <충돌해결한파일>
git rebase --continue
```

- **왜?** merge 대신 rebase를 쓰면 **이력이 줄줄이 깔끔**하다.

---

# 7) 기능 완료 → main에 병합

```bash
# (GitHub에서 PR 생성/리뷰/머지 권장) 로컬에서 머지한다면:
git switch main
git pull --rebase
git merge --no-ff feature/matching-ui -m "merge: matching UI 완료"
git push
```

- **왜?** PR로 코드 리뷰가 가능하고, main 보호 정책(리뷰 필수, 테스트 통과 등)을 걸 수 있다.

---

# 8) 중요한 시점에는 태그 찍기 (돌아가기 쉬움)

```bash
git tag v1.0-match
git push origin v1.0-match
```

- **왜?** “여기까지는 잘 되던 시점” 북마크. 문제가 생기면 그 지점으로 쉽게 체크아웃/비교 가능.

---

# 9) 과거 이력 보기 / 비교 / 복원

### 바뀐 내용 한눈에

```bash
git lg            # 내가 만든 alias. 그래프 형태 로그
git log --stat    # 변경 파일/변경량까지
```

### 커밋 간 차이

```bash
git diff HEAD~1           # 직전 커밋과 비교
git diff <hash1> <hash2>  # 두 커밋 비교
```

### 특정 파일을 과거 버전으로 되돌리기(안전)

```bash
git restore --source=<commit-hash> path/to/file.tsx
```

### 전체를 특정 커밋 시점으로 되돌리고 싶다면(위험하니 신중)

```bash
git reset --hard <commit-hash>
git push -f   # 협업 중이면 금지! 내 포크에서만
```

### 이미 푸시된 “문제 커밋”만 되돌리기(이력 보존, 안전)

```bash
git revert <commit-hash>
git push
```

---

# 10) “전체 교체” 상황에서 이력도 깔끔하게 남기는 요령

- **파일을 몽땅 바꿔치기** 했다면, 아래처럼 **논리 덩어리로 나눠 커밋**하면 좋아:

  1. “chore: 페이지 파일 구조 재정렬”
  2. “feat: 추천 저장 로직 교체 (rpc_save_matches 호출)”
  3. “fix: checked 상태 초기화 & 중복 방지”
     → 이러면 깃이 “모두 삭제+추가”로 안 보이고, 비교/리뷰가 쉬워짐.

- 한 번에 거대한 diff를 만들지 말고 **부분적 add/commit** (`git add -p`)을 꼭 활용해.

---

# 11) VS Code에서 유용한 것 (터미널 외)

- **Source Control(좌측 사이드바)**

  - 파일 우클릭 → _Stage Changes_ / _Discard Changes_
  - 변경된 파일 더블클릭 → 좌/우 비교(diff) 뷰

- **타임라인 탭**: 파일 단위 변경 이력 보기
- **명령 팔레트** (`Cmd/Ctrl+Shift+P`)

  - “Git: Create Branch”, “Git: Switch Branch”, “Git: Stash”, “Git: Restore” 등 검색 실행

---

# 12) 협업 안전장치(선택)

- GitHub에서 **main 보호 규칙** 켜기

  - 최소 1명 리뷰 필요
  - 상태 체크(테스트) 통과해야 머지 가능

- 커밋 메시지 포맷 강제하고 싶으면 Husky(프리커밋 훅) + Commitlint 도입

---

# 13) 최소 치트시트 (복붙용)

```bash
# 시작
git pull --rebase
git switch -c feature/awesome

# 작업/커밋
git status
git add -p
git commit -m "feat(awesome): 뭔가 추가"

# 잠깐 저장
git stash push -m "WIP awesome"
git stash pop

# 공유
git push -u origin feature/awesome

# 최신 main 반영
git fetch origin
git rebase origin/main

# 완료/머지
git switch main
git pull --rebase
git merge --no-ff feature/awesome -m "merge: awesome 완료"
git push

# 이력/비교/복원
git lg
git diff HEAD~1
git restore --source=<hash> path/to/file.tsx
git revert <hash>   # 푸시된 문제 커밋 되돌리기 (안전)
```

---

원하면 지금 레포에 맞는 **브랜치 이름 규칙, 커밋 메시지 템플릿, PR 템플릿, main 보호 설정**까지 제가 딱 맞춰서 제안서로 만들어 줄게. 그러면 팀에 공유만 하면 모두 같은 방식으로 깔끔하게 버전 관리할 수 있어.
